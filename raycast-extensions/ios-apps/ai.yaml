instructions: |
  You are an AI assistant for iOS Apps, a Raycast extension for searching, exploring, and managing iOS applications from the App Store.
  
  When a user asks a question or makes a request about iOS apps, follow these guidelines:
  
  # Tool Selection Guidelines
  Choose the appropriate tool based on the query type:
  
  ## For app discovery and search:
  - Use the `search-apps` tool when:
    - The user is looking for apps by name (e.g., "search for Twitter")
    - The user wants to find apps in a specific category (e.g., "find games")
    - The user wants to browse apps with specific criteria (e.g., "free productivity apps")
  - This tool accepts parameters:
    - `query`: The search term (required)
    - `limit`: Maximum number of results to return (optional, default: 10, max: 20)
  
  ## For detailed app information:
  - Use the `get-app-details` tool when:
    - The user asks about a specific app (e.g., "what's the latest version of gemini?")
    - The user wants detailed information like ratings, description, or screenshots
    - The user needs technical details like app size or version
  - This tool accepts parameters:
    - `query`: The app name or search term (required)
    - `bundleId`: Optional bundle ID if known (will skip search step)
  
  ## For app downloads:
  - Use the `download-app` tool when:
    - The user explicitly asks to download an app (e.g., "download Spotify")
    - Note: This requires the user to have enabled app downloads in preferences
  - This tool accepts parameters:
    - `query`: The app name or search term (required)
  
  # Response Guidelines
  - Be concise and informative in your responses
  - Format app information in a clear, readable way using markdown
  - Include relevant details like developer, category, price, and ratings
  - For search results, present options in a list format
  - For detailed app information, organize content with appropriate headings
  - When suggesting downloads, mention installation options if relevant
  - Always cite the App Store as the source of information

evals:
  - input: "@ios-apps search for Raycast"
    expected:
      - callsTool:
          name: "search-apps"
          arguments:
            query: "Raycast"
            limit: 1
    mocks:
      search-apps: |
        I found the Raycast app on iOS:

        -  **Name:** Raycast: AI, Notes and more
        -  **Version:** 1.0.6
        -  **Developer:** Raycast Technologies Inc
        -  **Rating:** 4.38/5
        -  **Description:** Your all-in-one productivity toolkit with AI, notes, and more — now on mobile as the perfect companion to the macOS app.
        -  **Link:** [View on App Store](https://apps.apple.com/us/app/raycast/id6446901002)

        Would you like to download or get more details about it?

  - input: "@ios-apps what's the latest version of Raycast?"
    expected:
      - callsTool:
          name: "get-app-details"
          arguments:
            query: "Raycast"
    mocks:
      get-app-details: |
        The latest version of Raycast is 1.0.6 It was last updated on June 17, 2025.


  - input: "@ios-apps tell me about Raycast"
    expected:
      - callsTool:
          name: "get-app-details"
          arguments:
            query: "Raycast"
            bundleId: "com.raycast.raycast"
    mocks:
      get-app-details: |
        Raycast_iOS_App:
          name: "Raycast: AI, Notes and more"
          developer: "Raycast Technologies Inc"
          category: "Productivity"
          size: "Approx. 150 MB"
          age_rating: "4+"
          price: "Free with in-app purchases (Pro tier available)"
          rating:
            value: 4.4
            stars: "★★★★☆"
            review_count: "~94 reviews"
          version: "1.0.6"
          last_updated: "June 17, 2025"

          description: >
            A compact companion to the macOS app, Raycast for iOS brings together
            AI-powered chat, note-taking, quicklinks, snippets, and seamless cloud
            sync into a mobile-centric interface. With voice dictation (via Whisper),
            AI multi‑model support, Shortcuts integration, widgets, and support for
            the Action button/iOS 18’s Control Center, it keeps your essential
            productivity tools just a tap or voice‑hold away.

          whats_new:
            version: "1.0.6"
            date: "June 17, 2025"
            changes:
              - "Fixed crash when loading older AI chats"
              - "Resolved issue where favorite widget could go blank"
              - "Fixed Spotlight search to ensure content is searchable"

          features:
            - "AI Chat with dozens of AI models, plus voice/photo input support"
            - "Notes with markdown support and sync across devices"
            - "Quicklinks & Snippets access and editing"
            - "Widgets & Shortcuts integration for home screen and automation"
            - "Cloud Sync (requires Raycast Pro)"

          limitations_and_roadmap:
            current_limitations:
              - "No system-wide launcher due to iOS sandboxing"
            upcoming_features:
              - "Custom keyboard"
              - "Focus mode and clipboard history sync"
              - "Expanded AI Extensions"

          links:
            app_store: "https://apps.apple.com/app/raycast-ai-notes-and-more/id6474426063"
            developer_website: "https://www.raycast.com/ios"

  - input: "@ios-apps download Raycast"
    expected:
      - callsTool:
          name: "download-app"
          arguments:
            query: "Raycast"
    mocks:
      download-app: |
        The app Raycast: AI, Notes and more has been downloaded successfully. 
        You can find the file named Raycast- AI, Notes and more 1.0.6.ipa in your downloads folder.

  - input: "@ios-apps search for games with limit 5"
    expected:
      - callsTool:
          name: "search-apps"
          arguments:
            query: "games"
            limit: 5
    mocks:
      search-apps: |
        Here are 5 games available on the App Store:

        | Name | Developer | Rating | Description |
        |:---|:---|:---|:---|
        | Magic Tiles 3: Piano Game | Amanotes Pte Ltd | 4.52 | Music rhythm game with hit songs |
        | Trivia Crack : Fun Quiz Games | Etermax | 4.60 | Trivia game with questions across categories |
        | Sniper 3D: Gun Shooting Games | Wildlife Studios | 4.75 | Action-packed sniper shooting game |
        | Township | PLR Worldwide | 4.76 | City-building and farming game |
        | Block Blast! | ARETIS LIMITED | 4.88 | Endless block puzzle game |